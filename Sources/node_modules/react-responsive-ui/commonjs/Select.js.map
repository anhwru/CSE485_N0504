{"version":3,"sources":["../source/Select.js"],"names":["PureComponent","Component","empty_value_option_value","Select","state","focus","select","focusToggler","selectButton","onCollapse","focusOut","props","native","nativeExpanded","setState","isExpanded","onExpand","onFocus","expand","list","collapse","toggle","storeListRef","ref","storeSelectNode","node","storeSelectButton","storeInputComponentNode","inputComponentNode","getSelectButton","nativeSelectOnKeyDown","event","shouldShowOptionsList","onKeyDownFromNativeSelect","onKeyDown","nativeSelectOnMouseDown","preventDefault","nativeSelectOnChange","value","target","undefined","setValue","navigator","userAgent","toLowerCase","indexOf","onClick","disabled","required","fromNativeSelect","defaultPrevented","ctrlKey","altKey","shiftKey","metaKey","keyCode","isEmptyValue","newValue","onChange","onBlur","expandable","container","_onFocusOut","window","rruiCollapseOnFocusOut","onFocusOut","upward","icon","compact","scroll","scrollMaxItems","scrollIntoView","alignment","saveOnIcons","placeholder","options","indicateInvalid","error","closeButtonIcon","closeLabel","ariaPreferNativeSelect","wait","style","className","containerStyle","textAlign","label","getLabel","renderNativeSelect","renderSelectButton","getAriaLabel","map","option","i","divider","content","title","toggleClassName","selected","getSelectedOption","selectedOptionLabel","getPlaceholder","showIconOnly","hasEmptyOption","createElement","name","tabIndex","renderNativeSelectOptions","empty_option_present","rendered_options","renderNativeSelectOption","unshift","nonSelectable","isDivider","getOptionKey","ariaLabel","propTypes","arrayOf","shape","any","string","oneOfType","func","isRequired","bool","object","number","defaultProps"],"mappings":"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","file":"Select.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { polyfill as reactLifecyclesCompat } from 'react-lifecycles-compat'\r\nimport classNames from 'classnames'\r\n\r\nimport ExpandableList from './ExpandableList'\r\nimport List from './List'\r\nimport Label from './TextInputLabel'\r\nimport Ellipsis from './Ellipsis'\r\nimport Divider from './Divider'\r\n\r\nimport { onBlurForReduxForm } from './utility/redux-form'\r\nimport { submitFormOnCtrlEnter, submitContainingForm } from './utility/dom'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\nconst empty_value_option_value = ''\r\n\r\n@reactLifecyclesCompat\r\nexport default class Select extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// A list of selectable options\r\n\t\toptions : PropTypes.arrayOf\r\n\t\t(\r\n\t\t\tPropTypes.shape\r\n\t\t\t({\r\n\t\t\t\t// Option value (may be `undefined`)\r\n\t\t\t\tvalue : PropTypes.any,\r\n\t\t\t\t// Option label (may be `undefined`)\r\n\t\t\t\tlabel : PropTypes.string,\r\n\t\t\t\t// Option icon\r\n\t\t\t\ticon  : PropTypes.oneOfType\r\n\t\t\t\t([\r\n\t\t\t\t\tPropTypes.node,\r\n\t\t\t\t\tPropTypes.func\r\n\t\t\t\t]),\r\n\t\t\t\t// Render custom content (a React component).\r\n\t\t\t\t// Receives `{ value, label }` properties.\r\n\t\t\t\tcontent : PropTypes.func\r\n\t\t\t})\r\n\t\t)\r\n\t\t.isRequired,\r\n\r\n\t\t// HTML form input `name` attribute\r\n\t\tname       : PropTypes.string,\r\n\r\n\t\t// Label which is placed above the select\r\n\t\tlabel      : PropTypes.string,\r\n\r\n\t\t// Placeholder (like \"Choose\")\r\n\t\tplaceholder : PropTypes.string,\r\n\r\n\t\t// Whether to use native `<select/>`\r\n\t\tnative      : PropTypes.bool.isRequired,\r\n\r\n\t\t// Whether to use native `<select/>` when expanded\r\n\t\tnativeExpanded : PropTypes.bool.isRequired,\r\n\r\n\t\t// Show icon only for selected item,\r\n\t\t// and only if `icon` is `true`.\r\n\t\tsaveOnIcons : PropTypes.bool.isRequired,\r\n\r\n\t\t// Disables this control\r\n\t\tdisabled   : PropTypes.bool,\r\n\r\n\t\t// Set to `true` to mark the field as required\r\n\t\trequired   : PropTypes.bool.isRequired,\r\n\r\n\t\t// Set to `true` to display the loading indicator\r\n\t\twait       : PropTypes.bool.isRequired,\r\n\r\n\t\t// Selected option value\r\n\t\tvalue      : PropTypes.any,\r\n\r\n\t\t// Is called when an option is selected\r\n\t\tonChange   : PropTypes.func,\r\n\r\n\t\t// Is called when the select is focused.\r\n\t\t// Can be used for toggling `--focus` CSS class.\r\n\t\t// Not tested.\r\n\t\t// `event` argument can be `undefined`.\r\n\t\tonFocus    : PropTypes.func,\r\n\r\n\t\t// Is called when the select is blurred.\r\n\t\t// This `onBlur` interceptor is a workaround for `redux-form`,\r\n\t\t// so that it gets the parsed `value` in its `onBlur` handler,\r\n\t\t// not the formatted text.\r\n\t\tonBlur     : PropTypes.func,\r\n\r\n\t\t// If `scroll` is `false`, then options list\r\n\t\t// is not limited in height.\r\n\t\t// Is `true` by default (scrollable).\r\n\t\tscroll     : PropTypes.bool.isRequired,\r\n\r\n\t\t// Component CSS class\r\n\t\tclassName  : PropTypes.string,\r\n\r\n\t\t// `<button/>` toggler CSS class\r\n\t\ttoggleClassName : PropTypes.string,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle      : PropTypes.object,\r\n\r\n\t\t// If this flag is set to `true`,\r\n\t\t// and `icon` is specified for a selected option,\r\n\t\t// then the selected option will be displayed\r\n\t\t// as icon only, without the label.\r\n\t\ticon       : PropTypes.bool,\r\n\r\n\t\t// If this flag is set to `true`,\r\n\t\t// then it makes `<Select/>` not stretch itself\r\n\t\t// to 100% width by making it `inline-block`.\r\n\t\t// Is set to `true` when `icon` is `true`\r\n\t\t// because it makes sense.\r\n\t\tcompact    : PropTypes.bool,\r\n\r\n\t\t// HTML `tabindex` attribute\r\n\t\ttabIndex   : PropTypes.number,\r\n\r\n\t\t// `aria-label` for the `<Select/>`'s `<button/>`.\r\n\t\t// Deprecated, use `aria-label` instead.\r\n\t\tariaLabel : PropTypes.string,\r\n\r\n\t\t// Has a bug when navigating via keyboard using Voice Over.\r\n\t\t// So don't use this property.\r\n\t\t// // Set to `false` to prevent the custom listbox from being `aria-hidden`\r\n\t\t// // and make the native `<select/>` `aria-hidden` instead.\r\n\t\t// // (except when `native` is `true`).\r\n\t\tariaPreferNativeSelect : PropTypes.bool.isRequired\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\tnative : false,\r\n\t\tnativeExpanded : false,\r\n\r\n\t\tsaveOnIcons : false,\r\n\r\n\t\t// Set to `true` to mark the field as required\r\n\t\trequired : false,\r\n\r\n\t\t// Show `error` (if passed).\r\n\t\tindicateInvalid : true,\r\n\r\n\t\t// Set to `true` to display the loading indicator\r\n\t\twait : false,\r\n\r\n\t\t// Will show scrollbar on overflow.\r\n\t\tscroll : true,\r\n\r\n\t\talignment : 'left',\r\n\r\n\t\tariaPreferNativeSelect : true\r\n\t}\r\n\r\n\tstate = {}\r\n\r\n\tfocus = () => this.select.focus()\r\n\tfocusToggler = () => this.selectButton.focus()\r\n\r\n\tonCollapse = ({ focusOut }) =>\r\n\t{\r\n\t\tconst { native, nativeExpanded } = this.props\r\n\r\n\t\tthis.setState({ isExpanded: false })\r\n\r\n\t\tif (!focusOut) {\r\n\t\t\tif (native || nativeExpanded) {\r\n\t\t\t\tthis.focus()\r\n\t\t\t} else {\r\n\t\t\t\tthis.focusToggler()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonExpand = () =>\r\n\t{\r\n\t\tconst { onFocus } = this.props\r\n\r\n\t\tif (onFocus) {\r\n\t\t\tonFocus()\r\n\t\t}\r\n\r\n\t\tthis.setState({ isExpanded: true })\r\n\t}\r\n\r\n\texpand     = () => this.list.expand()\r\n\tcollapse   = () => this.list.collapse()\r\n\ttoggle     = () => this.list.toggle()\r\n\r\n\tstoreListRef = (ref) => this.list = ref\r\n\tstoreSelectNode = (node) => this.select = node\r\n\tstoreSelectButton = (node) => this.selectButton = node\r\n\tstoreInputComponentNode = (node) => this.inputComponentNode = node\r\n\r\n\tgetSelectButton = () => this.selectButton\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tupward,\r\n\t\t\ticon,\r\n\t\t\tcompact,\r\n\t\t\tscroll,\r\n\t\t\tscrollMaxItems,\r\n\t\t\tscrollIntoView,\r\n\t\t\talignment,\r\n\t\t\tsaveOnIcons,\r\n\t\t\tnative,\r\n\t\t\tdisabled,\r\n\t\t\trequired,\r\n\t\t\tplaceholder,\r\n\t\t\toptions,\r\n\t\t\tvalue,\r\n\t\t\tonChange,\r\n\t\t\tindicateInvalid,\r\n\t\t\terror,\r\n\t\t\tcloseButtonIcon,\r\n\t\t\tcloseLabel,\r\n\t\t\tariaPreferNativeSelect,\r\n\t\t\twait,\r\n\t\t\tstyle,\r\n\t\t\tclassName\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst { isExpanded } = this.state\r\n\r\n\t\tconst containerStyle = { textAlign: alignment }\r\n\r\n\t\tconst label = this.getLabel()\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tstyle={ style ? { ...containerStyle, ...style } : containerStyle }\r\n\t\t\t\tclassName={ classNames\r\n\t\t\t\t(\r\n\t\t\t\t\t'rrui__select',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'rrui__select--compact'  : compact || icon\r\n\t\t\t\t\t},\r\n\t\t\t\t\tclassName\r\n\t\t\t\t) }>\r\n\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={ this.storeInputComponentNode }\r\n\t\t\t\t\tclassName=\"rrui__input\">\r\n\r\n\t\t\t\t\t{ wait && <Ellipsis/> }\r\n\r\n\t\t\t\t\t{/* Could use a wrapping `<label/>` here\r\n\t\t\t\t\t    but except the native `<select/>` there's\r\n\t\t\t\t\t    also a `<button/>` so they can't both\r\n\t\t\t\t\t    be wrapped in a `<label/>`.\r\n\t\t\t\t\t    In some future major version, when `--focus`\r\n\t\t\t\t\t    classes are added, the `<button/>` can be\r\n\t\t\t\t\t    moved out of the wrapping `<label/>`. */}\r\n\t\t\t\t\t{/* https://www.w3.org/TR/html50/forms.html#category-label */}\r\n\r\n\t\t\t\t\t{/* A transparent native `<select/>` on top\r\n\t\t\t\t\t    in case of `nativeExpanded={true}`.\r\n\t\t\t\t\t    (for better UX on mobile devices).\r\n\t\t\t\t\t    In case of `nativeExpanded={false}`\r\n\t\t\t\t\t    the native `<select/>` can be used for\r\n\t\t\t\t\t    javascriptless `<form/>` submission.\r\n\t\t\t\t\t    In case of `native={true}` it's just a\r\n\t\t\t\t\t    native `<select/>`. */}\r\n\t\t\t\t\t{ this.renderNativeSelect() }\r\n\r\n\t\t\t\t\t{/* The currently selected option */}\r\n\t\t\t\t\t{ !native && this.renderSelectButton() }\r\n\r\n\t\t\t\t\t{/* Label */}\r\n\t\t\t\t\t{/* (this label is placed after the \"selected\" button\r\n\t\t\t\t\t     to utilize the CSS `+` selector) */}\r\n\t\t\t\t\t{/* If the `placeholder` wasn't specified\r\n\t\t\t\t\t    but `label` was and no option is currently selected\r\n\t\t\t\t\t    then the `label` becomes the `placeholder`\r\n\t\t\t\t\t    until something is selected */}\r\n\t\t\t\t\t{ label &&\r\n\t\t\t\t\t\t<Label\r\n\t\t\t\t\t\t\taria-hidden\r\n\t\t\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\t\t\trequired={ required }\r\n\t\t\t\t\t\t\tinvalid={ indicateInvalid && error }\r\n\t\t\t\t\t\t\tfloats={ false }>\r\n\t\t\t\t\t\t\t{ label }\r\n\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* The list of selectable options */}\r\n\t\t\t\t\t{/* Since native `<select/>` is always rendered\r\n\t\t\t\t\t\t this custom Select can be made `aria-hidden={true}`. */}\r\n\t\t\t\t\t{ this.shouldShowOptionsList() &&\r\n\t\t\t\t\t\t<ExpandableList\r\n\t\t\t\t\t\t\tref={this.storeListRef}\r\n\t\t\t\t\t\t\taria-hidden={ariaPreferNativeSelect || native ? true : undefined}\r\n\t\t\t\t\t\t\taria-label={this.getAriaLabel()}\r\n\t\t\t\t\t\t\taria-required={required && isEmptyValue(value) ? true : undefined}\r\n\t\t\t\t\t\t\taria-invalid={error && indicateInvalid ? true : undefined}\r\n\t\t\t\t\t\t\tupward={upward}\r\n\t\t\t\t\t\t\talignment={alignment}\r\n\t\t\t\t\t\t\tscrollIntoView={scrollIntoView}\r\n\t\t\t\t\t\t\tscrollMaxItems={scroll === false ? 0 : scrollMaxItems}\r\n\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\tonChange={this.setValue}\r\n\t\t\t\t\t\t\tonCollapse={this.onCollapse}\r\n\t\t\t\t\t\t\tonExpand={this.onExpand}\r\n\t\t\t\t\t\t\tgetTogglerNode={this.getSelectButton}\r\n\t\t\t\t\t\t\tonFocusOut={this.onFocusOut}\r\n\t\t\t\t\t\t\tonTapOutside={this._onFocusOut}\r\n\t\t\t\t\t\t\tcloseButtonIcon={closeButtonIcon}\r\n\t\t\t\t\t\t\tcloseLabel={closeLabel}\r\n\t\t\t\t\t\t\tclassName={classNames('rrui__shadow', 'rrui__options-list',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'rrui__options-list--left-aligned'  : alignment === 'left',\r\n\t\t\t\t\t\t\t\t'rrui__options-list--right-aligned' : alignment === 'right'\r\n\t\t\t\t\t\t\t})}>\r\n\r\n\t\t\t\t\t\t\t{options.map((option, i) => (\r\n\t\t\t\t\t\t\t\t<List.Item\r\n\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\tvalue={option.value}\r\n\t\t\t\t\t\t\t\t\ticon={option.divider || saveOnIcons ? undefined : option.icon}>\r\n\t\t\t\t\t\t\t\t\t{option.divider ? <Divider/> : (option.content ? option.content(option) : option.label)}\r\n\t\t\t\t\t\t\t\t</List.Item>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ExpandableList>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Error message */}\r\n\t\t\t\t{ indicateInvalid && error &&\r\n\t\t\t\t\t<div className=\"rrui__input-error\">\r\n\t\t\t\t\t\t{ error }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\trenderSelectButton()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\twait,\r\n\t\t\tvalue,\r\n\t\t\tonFocus,\r\n\t\t\tdisabled,\r\n\t\t\trequired,\r\n\t\t\ticon,\r\n\t\t\ttitle,\r\n\t\t\tnative,\r\n\t\t\tnativeExpanded,\r\n\t\t\ttoggleClassName,\r\n\t\t\tindicateInvalid,\r\n\t\t\terror,\r\n\t\t\tariaPreferNativeSelect\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst { isExpanded } = this.state\r\n\r\n\t\tconst selected = this.getSelectedOption()\r\n\r\n\t\tconst selectedOptionLabel = selected && selected.label || this.getLabel() || this.getPlaceholder()\r\n\t\tconst showIconOnly = icon && selected && selected.icon\r\n\r\n\t\t// Since native `<select/>` is always rendered\r\n\t\t// this custom Select can be made `aria-hidden={true}`.\r\n\t\t//\r\n\t\t// Otherwise it would be something like:\r\n\t\t//\r\n\t\t// aria-label={ this.getAriaLabel() }\r\n\t\t// // aria-haspopup={ nativeExpanded ? undefined : 'listbox' }\r\n\t\t// aria-hidden={ nativeExpanded ? true : undefined }\r\n\t\t//\r\n\t\t// ARIA (accessibility) roles info:\r\n\t\t// https://www.w3.org/TR/wai-aria-practices/examples/listbox/listbox-collapsible.html\r\n\t\t//\r\n\t\t// `aria-haspopup`:\r\n\t\t// https://www.w3.org/TR/wai-aria-1.1/#aria-haspopup\r\n\t\t// WAI-ARIA 1.1 is not yet supported, so not using `aria-haspopup=\"listbox\"`.\r\n\r\n\t\treturn (\r\n\t\t\t<button\r\n\t\t\t\tref={ this.storeSelectButton }\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tdisabled={ disabled }\r\n\t\t\t\tonClick={ this.onClick }\r\n\t\t\t\tonKeyDown={ this.onKeyDown }\r\n\t\t\t\tonFocus={ onFocus }\r\n\t\t\t\tonBlur={ this.onBlur }\r\n\t\t\t\ttabIndex={ ariaPreferNativeSelect || native ? -1 : undefined }\r\n\t\t\t\ttitle={ title }\r\n\t\t\t\taria-hidden={ ariaPreferNativeSelect || native ? true : undefined }\r\n\t\t\t\taria-label={ this.getAriaLabel() }\r\n\t\t\t\taria-expanded={ isExpanded ? true : false }\r\n\t\t\t\tclassName={ classNames\r\n\t\t\t\t(\r\n\t\t\t\t\t'rrui__input-element',\r\n\t\t\t\t\t'rrui__button-reset',\r\n\t\t\t\t\t'rrui__outline',\r\n\t\t\t\t\t'rrui__select__button',\r\n\t\t\t\t\ttoggleClassName,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'rrui__select__button--empty'    : isEmptyValue(value) && !this.hasEmptyOption(),\r\n\t\t\t\t\t\t'rrui__select__button--invalid'  : indicateInvalid && error,\r\n\t\t\t\t\t\t'rrui__select__button--disabled' : disabled\r\n\t\t\t\t\t}\r\n\t\t\t\t) }>\r\n\r\n\t\t\t\t{/* http://stackoverflow.com/questions/35464067/flexbox-not-working-on-button-element-in-some-browsers */}\r\n\t\t\t\t<span className=\"rrui__select__selected-content\">\r\n\r\n\t\t\t\t\t{/* Selected option label (or icon) */}\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName={ classNames('rrui__select__selected-label',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'rrui__select__selected-label--required' : !this.getLabel() && required && isEmptyValue(value)\r\n\t\t\t\t\t\t}) }>\r\n\t\t\t\t\t\t{ showIconOnly ? React.createElement(selected.icon, { value, label: selectedOptionLabel }) : selectedOptionLabel }\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t{/* An arrow */}\r\n\t\t\t\t\t{ !wait && <span className=\"rrui__select__arrow\"/> }\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n\r\n\trenderNativeSelect()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tname,\r\n\t\t\tvalue,\r\n\t\t\tlabel,\r\n\t\t\tdisabled,\r\n\t\t\trequired,\r\n\t\t\tnative,\r\n\t\t\tnativeExpanded,\r\n\t\t\terror,\r\n\t\t\tindicateInvalid,\r\n\t\t\ttabIndex,\r\n\t\t\tariaPreferNativeSelect\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\treturn (\r\n\t\t\t<select\r\n\t\t\t\tref={ this.storeSelectNode }\r\n\t\t\t\tname={ name }\r\n\t\t\t\tvalue={ isEmptyValue(value) ? empty_value_option_value : value }\r\n\t\t\t\tdisabled={ disabled }\r\n\t\t\t\tonKeyDown={ this.nativeSelectOnKeyDown }\r\n\t\t\t\tonMouseDown={ this.nativeSelectOnMouseDown }\r\n\t\t\t\tonChange={ this.nativeSelectOnChange }\r\n\t\t\t\ttabIndex={ ariaPreferNativeSelect || native ? tabIndex : -1 }\r\n\t\t\t\taria-hidden={ ariaPreferNativeSelect || native ? undefined : true }\r\n\t\t\t\taria-label={ this.getAriaLabel() }\r\n\t\t\t\taria-required={ required && isEmptyValue(value) ? true : undefined }\r\n\t\t\t\taria-invalid={ error && indicateInvalid ? true : undefined }\r\n\t\t\t\tclassName={ classNames(\r\n\t\t\t\t\t// `:focus` style is implemented via border color\r\n\t\t\t\t\t// so outline can be muted safely here.\r\n\t\t\t\t\t'rrui__outline',\r\n\t\t\t\t\t'rrui__select__native', {\r\n\t\t\t\t\t\t'rrui__select__native--overlay' : !native,\r\n\t\t\t\t\t\t'rrui__select__native--invalid' : indicateInvalid && error\r\n\t\t\t\t\t}\r\n\t\t\t\t) }>\r\n\t\t\t\t{this.renderNativeSelectOptions()}\r\n\t\t\t</select>\r\n\t\t)\r\n\t}\r\n\r\n\trenderNativeSelectOptions()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\toptions,\r\n\t\t\tvalue,\r\n\t\t\tplaceholder\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tlet empty_option_present = false\r\n\r\n\t\tconst rendered_options = options.map((option) =>\r\n\t\t{\r\n\t\t\tlet { value, label, divider } = option\r\n\r\n\t\t\tif (!divider && isEmptyValue(value))\r\n\t\t\t{\r\n\t\t\t\tempty_option_present = true\r\n\t\t\t\tvalue = empty_value_option_value\r\n\t\t\t}\r\n\r\n\t\t\treturn this.renderNativeSelectOption(value, label, divider === true, divider)\r\n\t\t})\r\n\r\n\t\tif (isEmptyValue(value) && !empty_option_present)\r\n\t\t{\r\n\t\t\trendered_options.unshift(this.renderNativeSelectOption(undefined, placeholder, true))\r\n\t\t}\r\n\r\n\t\treturn rendered_options\r\n\t}\r\n\r\n\trenderNativeSelectOption(value, label, nonSelectable, isDivider)\r\n\t{\r\n\t\treturn (\r\n\t\t\t<option\r\n\t\t\t\tkey={ getOptionKey(value) }\r\n\t\t\t\tvalue={ isEmptyValue(value) ? '' : value }\r\n\t\t\t\thidden={ nonSelectable && !isDivider ? true : undefined }\r\n\t\t\t\tdisabled={ nonSelectable ? true : undefined }\r\n\t\t\t\tclassName={ classNames('rrui__select__native-option', {\r\n\t\t\t\t\t'rrui__select__native-option--divider': isDivider\r\n\t\t\t\t})}>\r\n\t\t\t\t{ label }\r\n\t\t\t</option>\r\n\t\t)\r\n\t}\r\n\r\n\tnativeSelectOnKeyDown = (event) =>\r\n\t{\r\n\t\tif (this.shouldShowOptionsList())\r\n\t\t{\r\n\t\t\tthis.focus()\r\n\t\t\tthis.onKeyDownFromNativeSelect = true\r\n\t\t\tthis.onKeyDown(event)\r\n\t\t}\r\n\t}\r\n\r\n\tnativeSelectOnMouseDown = (event) =>\r\n\t{\r\n\t\tif (this.shouldShowOptionsList())\r\n\t\t{\r\n\t\t\tevent.preventDefault()\r\n\t\t\tthis.focus()\r\n\t\t\tthis.toggle()\r\n\t\t}\r\n\t}\r\n\r\n\tnativeSelectOnChange = (event) =>\r\n\t{\r\n\t\tlet value = event.target.value\r\n\r\n\t\t// Convert back from an empty string to `undefined`\r\n\t\tif (value === empty_value_option_value)\r\n\t\t{\r\n\t\t\t// `null` is not accounted for, use `undefined` instead.\r\n\t\t\tvalue = undefined\r\n\t\t}\r\n\r\n\t\tthis.setValue(value)\r\n\r\n\t\t// Firefox has a bug:\r\n\t\t// Spacebar key on native `<select/>` is not being \"preventDefault\"ed.\r\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1428992\r\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1019630\r\n\t\t// https://stackoverflow.com/questions/15141398/cannot-preventdefault-via-firefox-on-a-select\r\n\t\t// This workaround hides the custom `<Select/>`\r\n\t\t// when a user selects something in the native `<select/>`\r\n\t\t// which expands over the custom one in Firefox due to the bug.\r\n\t\tif (navigator.userAgent.toLowerCase().indexOf('firefox') >= 0) {\r\n\t\t\tthis.collapse()\r\n\t\t}\r\n\t}\r\n\r\n\tonClick = (event) =>\r\n\t{\r\n\t\tconst { disabled, nativeExpanded } = this.props\r\n\r\n\t\tif (!disabled) {\r\n\t\t\t// The special case can only happen when `ariaPreferNativeSelect` is `false`\r\n\t\t\t// and tabbed to the `<button/>` of a `nativeExpanded` `<Select/>` and pressed Spacebar.\r\n\t\t\tif (nativeExpanded) {\r\n\t\t\t\t// Doesn't work.\r\n\t\t\t\t// this.select.click()\r\n\t\t\t\t// Don't use `ariaPreferNativeSelect`.\r\n\t\t\t} else {\r\n\t\t\t\tthis.toggle()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonKeyDown = (event) =>\r\n\t{\r\n\t\tconst { disabled, value, required } = this.props\r\n\t\tconst { isExpanded } = this.state\r\n\r\n\t\t// Reset \"event came from native select\" flag.\r\n\t\tconst fromNativeSelect = this.onKeyDownFromNativeSelect\r\n\t\tthis.onKeyDownFromNativeSelect = false\r\n\r\n\t\tif (disabled) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (!isExpanded) {\r\n\t\t\tif (submitFormOnCtrlEnter(event, this.selectButton)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tswitch (event.keyCode)\r\n\t\t{\r\n\t\t\t// \"Up\" arrow.\r\n\t\t\t// Select the previous item (if present).\r\n\t\t\tcase 38:\r\n\t\t\t// \"Down\" arrow.\r\n\t\t\t// Select the next item (if present).\r\n\t\t\tcase 40:\r\n\t\t\t\t// Firefox has a bug:\r\n\t\t\t\t// Up/Down arrow keys on native `<select/>` are not being \"preventDefault\"ed.\r\n\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1428992\r\n\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1019630\r\n\t\t\t\t// https://stackoverflow.com/questions/15141398/cannot-preventdefault-via-firefox-on-a-select\r\n\t\t\t\t// This workaround doesn't expand the custom `<Select/>`\r\n\t\t\t\t// when a user presses an Up/Down arrow key on the native `<select/>`.\r\n\t\t\t\tif (navigator.userAgent.toLowerCase().indexOf('firefox') >= 0) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\treturn this.list.onKeyDown(event)\r\n\r\n\t\t\t// \"Enter\".\r\n\t\t\tcase 13:\r\n\t\t\t\t// Submit containing `<form/>`.\r\n\t\t\t\t// Expand otherwise.\r\n\t\t\t\tif ((required && isEmptyValue(value)) || !submitContainingForm(this.selectButton)) {\r\n\t\t\t\t\tthis.expand()\r\n\t\t\t\t}\r\n\t\t\t\treturn event.preventDefault()\r\n\r\n\t\t\t// \"Spacebar\".\r\n\t\t\tcase 32:\r\n\t\t\t\tif (fromNativeSelect)\r\n\t\t\t\t{\r\n\t\t\t\t\t// Firefox has a bug:\r\n\t\t\t\t\t// Spacebar key on native `<select/>` is not being \"preventDefault\"ed.\r\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1428992\r\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1019630\r\n\t\t\t\t\t// https://stackoverflow.com/questions/15141398/cannot-preventdefault-via-firefox-on-a-select\r\n\t\t\t\t\tevent.preventDefault()\r\n\r\n\t\t\t\t\tthis.expand()\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\thasEmptyOption()\r\n\t{\r\n\t\tconst { options } = this.props\r\n\r\n\t\tfor (const option of options) {\r\n\t\t\tif (!option.divider && isEmptyValue(option.value)) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tgetSelectedOption()\r\n\t{\r\n\t\tconst { options, value } = this.props\r\n\r\n\t\tfor (const option of options)\r\n\t\t{\r\n\t\t\tif (!option.divider && option.value === value)\r\n\t\t\t{\r\n\t\t\t\treturn option\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetAriaLabel()\r\n\t{\r\n\t\tconst {\r\n\t\t\t// Deprecated, use `aria-label` instead.\r\n\t\t\tariaLabel,\r\n\t\t\tlabel\r\n\t\t} = this.props\r\n\r\n\t\treturn this.props['aria-label'] || ariaLabel || label\r\n\t}\r\n\r\n\tgetLabel()\r\n\t{\r\n\t\tconst { label, placeholder, value } = this.props\r\n\r\n\t\tif (isEmptyValue(value)) {\r\n\t\t\tif (placeholder) {\r\n\t\t\t\treturn label\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn label\r\n\t\t}\r\n\t}\r\n\r\n\tgetPlaceholder()\r\n\t{\r\n\t\tconst { label, placeholder, value } = this.props\r\n\r\n\t\tif (isEmptyValue(value)) {\r\n\t\t\treturn placeholder || label\r\n\t\t}\r\n\t}\r\n\r\n\tshouldShowOptionsList()\r\n\t{\r\n\t\tconst { native, nativeExpanded } = this.props\r\n\t\treturn !native && !nativeExpanded\r\n\t}\r\n\r\n\tsetValue = (newValue) =>\r\n\t{\r\n\t\tconst { value, onChange } = this.props\r\n\r\n\t\t// Call `onChange` only if the `value` did change.\r\n\t\tif (newValue !== value) {\r\n\t\t\tonChange(newValue)\r\n\t\t}\r\n\t}\r\n\r\n\tonBlur = (event) =>\r\n\t{\r\n\t\tconst { onBlur, value } = this.props\r\n\r\n\t\tif (this.list) {\r\n\t\t\tthis.list.onBlur(event)\r\n\t\t}\r\n\r\n\t\t// When the `<button/>` was focused out\r\n\t\t// while there was no list being shown.\r\n\t\tif (onBlur && this.list && this.list.expandable && !this.list.expandable.container) {\r\n\t\t\tonBlurForReduxForm(onBlur, event, value)\r\n\t\t}\r\n\t}\r\n\r\n\t_onFocusOut = () =>\r\n\t{\r\n\t\tconst { native, nativeExpanded } = this.props\r\n\r\n\t\tif (!native && !nativeExpanded) {\r\n\t\t\t// `window.rruiCollapseOnFocusOut` can be used\r\n\t\t\t// for debugging expandable contents.\r\n\t\t\tif (window.rruiCollapseOnFocusOut !== false) {\r\n\t\t\t\tthis.collapse()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonFocusOut = (event) =>\r\n\t{\r\n\t\tconst { onBlur, value } = this.props\r\n\r\n\t\tthis._onFocusOut()\r\n\r\n\t\tif (onBlur) {\r\n\t\t\tonBlurForReduxForm(onBlur, event, value)\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// There can be an `undefined` value,\r\n// so just `{ value }` won't do here.\r\nfunction getOptionKey(value)\r\n{\r\n\treturn isEmptyValue(value) ? '@@rrui/empty' : value\r\n}\r\n\r\nfunction isEmptyValue(value)\r\n{\r\n\treturn value === null || value === undefined\r\n}"]}