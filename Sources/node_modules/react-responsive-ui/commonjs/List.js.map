{"version":3,"sources":["../source/List.js"],"names":["findItemIndexByValue","PureComponent","Component","DividerType","type","List","state","itemRefs","getFocusedItemIndex","focusedItemIndex","clearFocus","setState","undefined","focusedItemValue","unfocus","focus","focusItem","getFirstFocusableItemIndex","props","onFocusItem","shouldFocus","getItemValue","onKeyDown","event","children","defaultPrevented","input","ctrlKey","altKey","shiftKey","metaKey","Children","count","keyCode","preventDefault","previousIndex","getPreviousFocusableItemIndex","nextIndex","getNextFocusableItemIndex","click","tagName","toLowerCase","onItemFocus","expandable","onFocusIn","onBlur","clearTimeout","blurTimer","result","onFocusOut","list","isFocused","value","isFocusableItemIndex","index","isFocusableItem","item","storeListNode","node","storeItemRef","ref","i","length","toArray","disabled","tabbable","hasOnChange","onChange","onSelectItem","highlightSelectedItem","ariaSelectedOnFocusedItem","createButtons","className","style","role","map","ItemType","Error","cloneElement","key","itemRef","focused","tabIndex","createButton","onItemBlur","hasOnSelectItem","selectedItemValue","newState","items","focusFirstItemWhenItemsChange","propTypes","any","func","bool","arrayOf","object","isRequired","string","defaultProps","Item","onMouseDown","shouldCreateButton","isSelectable","onFocus","onClick","onSelect","storeRef","icon","isSelected","properties","ItemComponent","itemChildren","label","unshift","createElement","number","haveItemsChanged","prevProps","prevItems"],"mappings":"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","file":"List.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\nimport { polyfill as reactLifecyclesCompat } from 'react-lifecycles-compat'\r\n\r\nimport Divider from './Divider'\r\n\r\nimport { submitFormOnCtrlEnter } from './utility/dom'\r\nimport { onBlur, focus } from './utility/focus'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\n// Workaround for `react-hot-loader`.\r\n// https://github.com/gaearon/react-hot-loader#checking-element-types\r\nconst DividerType = <Divider/>.type\r\n\r\n@reactLifecyclesCompat\r\nexport default class List extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\tvalue : PropTypes.any,\r\n\t\tonChange : PropTypes.func,\r\n\r\n\t\t// If a `<List/>` has `onChange` then it wraps `<List.Item/>`s with `<button/>`s.\r\n\t\t// The `onChange` added by `<ExpandableList/>` overrides the original `onChange`.\r\n\t\t// If there was no `onChange` — there will be one.\r\n\t\t// So to retain that info `hasOnChange` property is used as a workaround.\r\n\t\t// `undefined` means \"ignore this property\".\r\n\t\thasOnChange : PropTypes.bool,\r\n\r\n\t\t// If `items` property is supplied then it's used to\r\n\t\t// detect \"on items changed\" event in `getDerivedStateFromProps`.\r\n\t\t// It seems to be the only usage of the `items` property.\r\n\t\titems : PropTypes.arrayOf(PropTypes.object),\r\n\r\n\t\t// Legacy method, use `onChange` instead.\r\n\t\tonSelectItem : PropTypes.func,\r\n\t\thighlightSelectedItem : PropTypes.bool.isRequired,\r\n\r\n\t\tonFocusItem : PropTypes.func,\r\n\t\tonKeyDown : PropTypes.func,\r\n\r\n\t\t// ARIA `role` attribute.\r\n\t\trole : PropTypes.string,\r\n\r\n\t\t// `role=\"combobox\"` requires `aria-selected` to be\r\n\t\t// `true` on the currently focused list option.\r\n\t\tariaSelectedOnFocusedItem : PropTypes.bool,\r\n\r\n\t\t// If a `<List/>` is `expandable`\r\n\t\t// then it won't be `.rrui__list:not(.rrui__list--focus)`.\r\n\t\t// `.rrui__list:not(.rrui__list--focus)` is only for standalone lists.\r\n\t\texpandable : PropTypes.bool,\r\n\r\n\t\ttabbable : PropTypes.bool.isRequired,\r\n\t\tshouldFocus : PropTypes.bool.isRequired,\r\n\t\tfocusFirstItemWhenItemsChange : PropTypes.bool.isRequired,\r\n\t\tcreateButtons : PropTypes.bool.isRequired\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\ttabbable : true,\r\n\t\tshouldFocus : true,\r\n\t\tfocusFirstItemWhenItemsChange : false,\r\n\t\tcreateButtons : true,\r\n\t\thighlightSelectedItem : true\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(props, state)\r\n\t{\r\n\t\tconst newState =\r\n\t\t{\r\n\t\t\titems : props.items\r\n\t\t}\r\n\r\n\t\t// If `items` property is supplied\r\n\t\t// then it's used to detect \"on items changed\" event.\r\n\t\tif (state.items && state.items !== props.items)\r\n\t\t{\r\n\t\t\tnewState.items = props.items\r\n\r\n\t\t\t// Focus the first item.\r\n\t\t\tif (props.focusFirstItemWhenItemsChange)\r\n\t\t\t{\r\n\t\t\t\tnewState.focusedItemValue = props.items[0].value\r\n\t\t\t\tnewState.focusedItemIndex = 0\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.selectedItemValue !== props.value)\r\n\t\t{\r\n\t\t\tnewState.selectedItemValue = props.value\r\n\r\n\t\t\tnewState.focusedItemValue = props.value\r\n\t\t\tnewState.focusedItemIndex = props.value === undefined ? undefined : findItemIndexByValue(props.value, props.children)\r\n\t\t}\r\n\r\n\t\treturn newState\r\n\t}\r\n\r\n\tstate = {}\r\n\r\n\t// `ref`s of all items currently rendered.\r\n\titemRefs = []\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tclearTimeout(this.blurTimer)\r\n\t}\r\n\r\n\tgetFocusedItemIndex = () =>\r\n\t{\r\n\t\tconst { focusedItemIndex } = this.state\r\n\r\n\t\treturn focusedItemIndex\r\n\t}\r\n\r\n\tclearFocus = () =>\r\n\t{\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\tfocusedItemIndex : undefined,\r\n\t\t\tfocusedItemValue : undefined\r\n\t\t})\r\n\t}\r\n\r\n\t// Deprecated method name.\r\n\tunfocus = this.clearFocus\r\n\r\n\t// Focuses on the list.\r\n\tfocus = () => {\r\n\t\tconst { focusedItemIndex } = this.state\r\n\t\tif (focusedItemIndex !== undefined) {\r\n\t\t\treturn this.focusItem(focusedItemIndex)\r\n\t\t}\r\n\t\t// Focus the first focusable list item.\r\n\t\tthis.focusItem(this.getFirstFocusableItemIndex())\r\n\t}\r\n\r\n\tgetFirstFocusableItemIndex()\r\n\t{\r\n\t\tlet i = 0\r\n\t\twhile (i < this.itemRefs.length)\r\n\t\t{\r\n\t\t\tif (this.itemRefs[i]) {\r\n\t\t\t\treturn i\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetItemValue(index)\r\n\t{\r\n\t\tconst { children } = this.props\r\n\r\n\t\tconst item = React.Children.toArray(children)[index]\r\n\t\treturn item.props.value\r\n\t}\r\n\r\n\t// Can be public API for programmatically focusing a certain `<List.Item/>`.\r\n\tfocusItem = (focusedItemIndex) =>\r\n\t{\r\n\t\tconst { onFocusItem, shouldFocus } = this.props\r\n\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\t// Focus the item.\r\n\t\t\tfocusedItemIndex,\r\n\t\t\t// Store the focused item value.\r\n\t\t\t// This is used for cases like autocomplete\r\n\t\t\t// where the list of options changes but\r\n\t\t\t// the focused option stays focused.\r\n\t\t\tfocusedItemValue: focusedItemIndex === undefined ? undefined : this.getItemValue(focusedItemIndex)\r\n\t\t},\r\n\t\t() => {\r\n\t\t\tif (focusedItemIndex !== undefined) {\r\n\t\t\t\tif (shouldFocus) {\r\n\t\t\t\t\tfocus(this.itemRefs[focusedItemIndex])\r\n\t\t\t\t}\r\n\t\t\t\tif (onFocusItem) {\r\n\t\t\t\t\tonFocusItem(focusedItemIndex)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tonKeyDown = (event) =>\r\n\t{\r\n\t\tconst { onKeyDown, children } = this.props\r\n\t\tconst { focusedItemIndex } = this.state\r\n\r\n\t\tif (onKeyDown) {\r\n\t\t\tonKeyDown(event)\r\n\t\t}\r\n\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (submitFormOnCtrlEnter(event, this.input)) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (React.Children.count(children) > 0)\r\n\t\t{\r\n\t\t\tswitch (event.keyCode)\r\n\t\t\t{\r\n\t\t\t\t// \"Up\" arrow.\r\n\t\t\t\t// Select the previous item (if present).\r\n\t\t\t\tcase 38:\r\n\t\t\t\t\tevent.preventDefault()\r\n\r\n\t\t\t\t\tconst previousIndex = this.getPreviousFocusableItemIndex()\r\n\r\n\t\t\t\t\tif (previousIndex !== undefined) {\r\n\t\t\t\t\t\tthis.focusItem(previousIndex)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn\r\n\r\n\t\t\t\t// \"Down\" arrow.\r\n\t\t\t\t// Select the next item (if present).\r\n\t\t\t\tcase 40:\r\n\t\t\t\t\tevent.preventDefault()\r\n\r\n\t\t\t\t\tconst nextIndex = this.getNextFocusableItemIndex()\r\n\r\n\t\t\t\t\tif (nextIndex !== undefined) {\r\n\t\t\t\t\t\tthis.focusItem(nextIndex)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn\r\n\r\n\t\t\t\t// \"Enter\".\r\n\t\t\t\tcase 13:\r\n\t\t\t\t\t// Choose the focused item on Enter\r\n\t\t\t\t\tevent.preventDefault()\r\n\r\n\t\t\t\t\tif (focusedItemIndex !== undefined) {\r\n\t\t\t\t\t\tthis.itemRefs[focusedItemIndex].click()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn\r\n\r\n\t\t\t\t// \"Spacebar\".\r\n\t\t\t\tcase 32:\r\n\t\t\t\t\t// Choose the focused item on Spacebar.\r\n\t\t\t\t\tif (focusedItemIndex !== undefined)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (this.itemRefs[focusedItemIndex].tagName.toLowerCase() !== 'button')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\t\t\tthis.itemRefs[focusedItemIndex].click()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Get the previous option (relative to the currently focused option)\r\n\tgetPreviousFocusableItemIndex()\r\n\t{\r\n\t\tconst { children } = this.props\r\n\t\tlet { focusedItemIndex } = this.state\r\n\r\n\t\tif (focusedItemIndex === undefined) {\r\n\t\t\tfocusedItemIndex = React.Children.count(children)\r\n\t\t}\r\n\r\n\t\twhile (focusedItemIndex > 0) {\r\n\t\t\tfocusedItemIndex--\r\n\t\t\tif (this.isFocusableItemIndex(focusedItemIndex)) {\r\n\t\t\t\treturn focusedItemIndex\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Get the next option (relative to the currently focused option)\r\n\tgetNextFocusableItemIndex()\r\n\t{\r\n\t\tconst { children } = this.props\r\n\t\tlet { focusedItemIndex } = this.state\r\n\r\n\t\tif (focusedItemIndex === undefined) {\r\n\t\t\tfocusedItemIndex = -1\r\n\t\t}\r\n\r\n\t\twhile (focusedItemIndex < React.Children.count(children) - 1) {\r\n\t\t\tfocusedItemIndex++\r\n\t\t\tif (this.isFocusableItemIndex(focusedItemIndex)) {\r\n\t\t\t\treturn focusedItemIndex\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonItemFocus = (event) => {\r\n\t\tconst { expandable } = this.props\r\n\t\tif (expandable) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.onFocusIn()\r\n\t}\r\n\r\n\tonBlur = (event) => {\r\n\t\tconst { expandable } = this.props\r\n\t\tif (expandable) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tclearTimeout(this.blurTimer)\r\n\t\tconst result = onBlur(event, this.onFocusOut, () => this.list)\r\n\t\tif (typeof result === 'number') {\r\n\t\t\tthis.blurTimer = result\r\n\t\t}\r\n\t}\r\n\r\n\tonFocusIn = () => {\r\n\t\tthis.setState({\r\n\t\t\tisFocused: true\r\n\t\t})\r\n\t}\r\n\r\n\tonFocusOut = () => {\r\n\t\tconst { value } = this.props\r\n\t\tif (value === undefined) {\r\n\t\t\tthis.clearFocus()\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tisFocused: false\r\n\t\t})\r\n\t}\r\n\r\n\tisFocusableItemIndex = (index) => this.itemRefs[index] !== undefined\r\n\r\n\tisFocusableItem = (item) => item.type !== DividerType\r\n\r\n\t// `this.list` is also being accessed from `<ScrollableList/>`.\r\n\tstoreListNode = (node) => this.list = node\r\n\r\n\tstoreItemRef = (ref, i) => this.itemRefs[i] = ref\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\texpandable,\r\n\t\t\tdisabled,\r\n\t\t\ttabbable,\r\n\t\t\tvalue,\r\n\t\t\thasOnChange,\r\n\t\t\tonChange,\r\n\t\t\t// `onSelectItem` is deprecated, use `onChange` instead.\r\n\t\t\tonSelectItem,\r\n\t\t\thighlightSelectedItem,\r\n\t\t\tariaSelectedOnFocusedItem,\r\n\t\t\tcreateButtons,\r\n\t\t\tclassName,\r\n\t\t\tstyle,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tlet { role } = this.props\r\n\r\n\t\tconst {\r\n\t\t\tfocusedItemIndex,\r\n\t\t\tisFocused\r\n\t\t} = this.state\r\n\r\n\t\t// ARIA (accessibility) roles info:\r\n\t\t// https://www.w3.org/TR/wai-aria-practices/examples/listbox/listbox-collapsible.html\r\n\t\tif (!role && (onChange || onSelectItem)) {\r\n\t\t\trole = 'listbox'\r\n\t\t}\r\n\r\n\t\t// if (this.props['aria-hidden']) {\r\n\t\t// \trole = undefined\r\n\t\t// }\r\n\r\n\t\treturn (\r\n\t\t\t<ul\r\n\t\t\t\tref={ this.storeListNode }\r\n\t\t\t\tonKeyDown={ this.onKeyDown }\r\n\t\t\t\trole={ role }\r\n\t\t\t\taria-label={ this.props['aria-label'] }\r\n\t\t\t\taria-hidden={ this.props['aria-hidden'] }\r\n\t\t\t\taria-required={ this.props['aria-required'] }\r\n\t\t\t\taria-invalid={ this.props['aria-invalid'] }\r\n\t\t\t\tstyle={ style }\r\n\t\t\t\tclassName={ classNames(className, 'rrui__list', {\r\n\t\t\t\t\t'rrui__list--focus': isFocused\r\n\t\t\t\t}) }>\r\n\r\n\t\t\t\t{ React.Children.map(children, (item, i) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (item.type !== ItemType) {\r\n\t\t\t\t\t\tthrow new Error(`Only <List.Item/>s can be placed inside a <List/> (and remove any whitespace).`)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn React.cloneElement(item,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey       : i,\r\n\t\t\t\t\t\tindex     : i,\r\n\t\t\t\t\t\titemRef   : this.isFocusableItem(item) ? this.storeItemRef : undefined,\r\n\t\t\t\t\t\trole      : role === 'listbox' ? 'option' : item.props.role,\r\n\t\t\t\t\t\tfocus     : this.focusItem,\r\n\t\t\t\t\t\tfocused   : (expandable || isFocused) && focusedItemIndex === i,\r\n\t\t\t\t\t\tdisabled  : disabled || item.props.disabled,\r\n\t\t\t\t\t\ttabIndex  : tabbable && (focusedItemIndex === undefined ? i === 0 : i === focusedItemIndex) ? 0 : -1,\r\n\t\t\t\t\t\tcreateButton : createButtons,\r\n\t\t\t\t\t\tonItemFocus : this.onItemFocus,\r\n\t\t\t\t\t\tonItemBlur : this.onBlur,\r\n\t\t\t\t\t\tonSelectItem : onChange || onSelectItem,\r\n\t\t\t\t\t\thasOnSelectItem : hasOnChange,\r\n\t\t\t\t\t\tselectedItemValue : value,\r\n\t\t\t\t\t\thighlightSelectedItem : (onChange || onSelectItem) && highlightSelectedItem,\r\n\t\t\t\t\t\tariaSelectedOnFocusedItem\r\n\t\t\t\t\t})\r\n\t\t\t\t}) }\r\n\t\t\t</ul>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport class Item extends React.Component\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\tvalue : PropTypes.any,\r\n\t\tindex : PropTypes.number,\r\n\t\tfocused : PropTypes.bool,\r\n\t\tonClick : PropTypes.func,\r\n\t\t// `onSelect` is deprecated, use `onClick` instead.\r\n\t\tonSelect : PropTypes.func,\r\n\t\tonSelectItem : PropTypes.func,\r\n\t\t// If a `<List/>` has `onChange` then it wraps `<List.Item/>`s with `<button/>`s.\r\n\t\t// The `onChange` added by `<ExpandableList/>` overrides the original `onChange`.\r\n\t\t// If there was no `onChange` — there will be one.\r\n\t\t// So to retain that info `hasOnChange` property is used as a workaround.\r\n\t\t// `undefined` means \"ignore this property\".\r\n\t\thasOnSelectItem : PropTypes.bool,\r\n\t\tselectedItemValue : PropTypes.any,\r\n\t\thighlightSelectedItem : PropTypes.bool,\r\n\t\t// `role=\"combobox\"` requires `aria-selected` to be\r\n\t\t// `true` on the currently focused list option.\r\n\t\tariaSelectedOnFocusedItem : PropTypes.bool,\r\n\t\tcreateButton : PropTypes.bool,\r\n\t\t// Deprecated. Use `createButton` instead.\r\n\t\tshouldCreateButton : PropTypes.bool\r\n\t}\r\n\r\n\tonMouseDown = (event) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tvalue,\r\n\t\t\tindex,\r\n\t\t\tfocus,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// If `<List.Item/>` child element gets wrapped in a `<button/>`\r\n\t\t// then call `onMouseDown` defined on the `<List.Item/>`.\r\n\t\t// If `<List.Item/>` child element doesn't get wrapped in a `<button/>`\r\n\t\t// then manually call `onMouseDown` defined on the `<List.Item/>` child element\r\n\t\t// because `onMouseDown` gets overridden for `<List.Item/>` child element.\r\n\r\n\t\tconst onMouseDown = this.shouldCreateButton() ? this.props.onMouseDown : children.props.onMouseDown\r\n\r\n\t\t// Without this Safari (both mobile and desktop)\r\n\t\t// won't select any item in an expanded list\r\n\t\t// because it will collapse the list immediately\r\n\t\t// on `mouseDown` due to `blur` event being fired.\r\n\t\tevent.preventDefault()\r\n\r\n\t\tif (this.isSelectable()) {\r\n\t\t\tfocus(index)\r\n\t\t}\r\n\r\n\t\tif (onMouseDown) {\r\n\t\t\tonMouseDown(event)\r\n\t\t}\r\n\t}\r\n\r\n\tonFocus = (event) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tfocus,\r\n\t\t\tindex,\r\n\t\t\tonItemFocus,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// If `<List.Item/>` child element gets wrapped in a `<button/>`\r\n\t\t// then call `onFocus` defined on the `<List.Item/>`.\r\n\t\t// If `<List.Item/>` child element doesn't get wrapped in a `<button/>`\r\n\t\t// then manually call `onFocus` defined on the `<List.Item/>` child element\r\n\t\t// because `onFocus` gets overridden for `<List.Item/>` child element.\r\n\r\n\t\tconst onFocus = this.shouldCreateButton() ? this.props.onFocus : children.props.onFocus\r\n\r\n\t\tif (this.isSelectable()) {\r\n\t\t\tfocus(index)\r\n\t\t}\r\n\r\n\t\tif (onFocus) {\r\n\t\t\tonFocus(event)\r\n\t\t}\r\n\r\n\t\tif (onItemFocus) {\r\n\t\t\tonItemFocus(event)\r\n\t\t}\r\n\t}\r\n\r\n\tonBlur = (event) =>\r\n\t{\r\n\t\tconst { onItemBlur, children } = this.props\r\n\r\n\t\t// If `<List.Item/>` child element gets wrapped in a `<button/>`\r\n\t\t// then call `onBlur` defined on the `<List.Item/>`.\r\n\t\t// If `<List.Item/>` child element doesn't get wrapped in a `<button/>`\r\n\t\t// then manually call `onFocus` defined on the `<List.Item/>` child element\r\n\t\t// because `onBlur` gets overridden for `<List.Item/>` child element.\r\n\r\n\t\tconst onBlur = this.shouldCreateButton() ? this.props.onBlur : children.props.onBlur\r\n\r\n\t\tif (onBlur) {\r\n\t\t\tonBlur(event)\r\n\t\t}\r\n\r\n\t\tif (onItemBlur) {\r\n\t\t\tonItemBlur(event)\r\n\t\t}\r\n\t}\r\n\r\n\tonClick = (event) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tonClick,\r\n\t\t\tonSelect,\r\n\t\t\tonSelectItem,\r\n\t\t\tindex,\r\n\t\t\tvalue,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// If `<List.Item/>` child element gets wrapped in a `<button/>`\r\n\t\t// then call `onClick` defined on the `<List.Item/>`.\r\n\t\t// If `<List.Item/>` child element doesn't get wrapped in a `<button/>`\r\n\t\t// then manually call `onClick` defined on the `<List.Item/>` child element\r\n\t\t// because `onClick` gets overridden for `<List.Item/>` child element,\r\n\t\t// and also call `onClick` defined on the `<List.Item/>` (if any).\r\n\r\n\t\tif (onClick) {\r\n\t\t\tonClick(event)\r\n\t\t}\r\n\r\n\t\tif (!this.shouldCreateButton()) {\r\n\t\t\t// Since `onClick` gets overridden\r\n\t\t\t// for `<List.Item/>` child element\r\n\t\t\t// call its original `onClick` manually here.\r\n\t\t\tif (children.props.onClick) {\r\n\t\t\t\tchildren.props.onClick(event)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.isSelectable())\r\n\t\t{\r\n\t\t\tif (onSelect) {\r\n\t\t\t\tonSelect(value, index)\r\n\t\t\t}\r\n\t\t\tif (onSelectItem) {\r\n\t\t\t\tonSelectItem(value, index)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisSelectable()\r\n\t{\r\n\t\tconst { children } = this.props\r\n\t\treturn children.type !== DividerType\r\n\t}\r\n\r\n\tfocus = () =>\r\n\t{\r\n\t\tconst { children } = this.props\r\n\r\n\t\tfocus(React.Children.toArray(children)[0])\r\n\t}\r\n\r\n\tstoreRef = (ref) =>\r\n\t{\r\n\t\tconst { itemRef, index } = this.props\r\n\r\n\t\tif (itemRef) {\r\n\t\t\titemRef(ref, index)\r\n\t\t}\r\n\t}\r\n\r\n\tshouldCreateButton()\r\n\t{\r\n\t\tconst {\r\n\t\t\tonClick,\r\n\t\t\tonSelect,\r\n\t\t\tonSelectItem,\r\n\t\t\thasOnSelectItem,\r\n\t\t\tcreateButton,\r\n\t\t\t// Deprecated. Use `createButton` instead.\r\n\t\t\tshouldCreateButton\r\n\t\t} = this.props\r\n\r\n\t\treturn this.isSelectable() && (\r\n\t\t\tonClick ||\r\n\t\t\tonSelect ||\r\n\t\t\t(\r\n\t\t\t\tonSelectItem &&\r\n\t\t\t\t(hasOnSelectItem === undefined ? true : hasOnSelectItem) &&\r\n\t\t\t\t(createButton || shouldCreateButton)\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tvalue,\r\n\t\t\ticon,\r\n\t\t\trole,\r\n\t\t\tfocused,\r\n\t\t\tdisabled,\r\n\t\t\tclassName,\r\n\t\t\ttabIndex,\r\n\t\t\thighlightSelectedItem,\r\n\t\t\tariaSelectedOnFocusedItem,\r\n\t\t\tselectedItemValue,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// Throws an error for some weird reason.\r\n\t\t// React.Children.only(children)\r\n\r\n\t\tif (React.Children.count(children) !== 1) {\r\n\t\t\tthrow new Error(`Each <List.Item/> must have a single child (and remove any whitespace).`)\r\n\t\t}\r\n\r\n\t\tconst isSelected = this.shouldCreateButton() && value === selectedItemValue\r\n\r\n\t\tconst properties =\r\n\t\t{\r\n\t\t\tref          : this.storeRef,\r\n\t\t\tonMouseDown  : this.onMouseDown,\r\n\t\t\tonClick      : this.onClick,\r\n\t\t\tonFocus      : this.onFocus,\r\n\t\t\tonBlur       : this.onBlur,\r\n\t\t\tclassName    : classNames\r\n\t\t\t(\r\n\t\t\t\tclassName,\r\n\t\t\t\t'rrui__list__item',\r\n\t\t\t\t{\r\n\t\t\t\t\t/* `--focused` modifiers are deprecated, use `--focus` instead. */\r\n\t\t\t\t\t'rrui__list__item--focused'  : focused,\r\n\t\t\t\t\t'rrui__list__item--focus'    : focused,\r\n\t\t\t\t\t'rrui__list__item--selected' : isSelected && highlightSelectedItem,\r\n\t\t\t\t\t'rrui__list__item--disabled' : disabled,\r\n\t\t\t\t\t'rrui__list__item--divider'  : children.type === DividerType\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tlet ItemComponent\r\n\t\tlet itemChildren\r\n\t\tlet label\r\n\r\n\t\tif (this.shouldCreateButton())\r\n\t\t{\r\n\t\t\tItemComponent = 'button'\r\n\t\t\tlabel = this.props.label || (typeof children === 'string' ? children : undefined)\r\n\t\t\tproperties.type = 'button'\r\n\t\t\tproperties.role = role\r\n\t\t\tproperties['aria-selected'] = ariaSelectedOnFocusedItem ? focused : isSelected\r\n\t\t\tproperties['aria-label'] = this.props.label || (typeof children !== 'string' && children && children.props ? children.props['aria-label'] : undefined)\r\n\t\t\tproperties.tabIndex = tabIndex\r\n\t\t\tproperties.disabled = disabled\r\n\t\t\tproperties.className = classNames(\r\n\t\t\t\tproperties.className,\r\n\t\t\t\t'rrui__button-reset',\r\n\t\t\t\t'rrui__outline',\r\n\t\t\t\t'rrui__list__item--button'\r\n\t\t\t)\r\n\r\n\t\t\t// Replace `itemChildren` array with `<React.Fragment/>`\r\n\t\t\t// in some future when React >= 16.2.0 is common.\r\n\t\t\t//\r\n\t\t\t// <React.Fragment>\r\n\t\t\t// \t{/* Icon. */}\r\n\t\t\t// \t{ icon &&\r\n\t\t\t// \t\t<div className=\"rrui__list__item-icon\">\r\n\t\t\t// \t\t\t{ React.createElement(icon, { value, label }) }\r\n\t\t\t// \t\t</div>\r\n\t\t\t// \t}\r\n\t\t\t//\r\n\t\t\t// \t{/* Label (or content). */}\r\n\t\t\t// \t{ children }\r\n\t\t\t// </React.Fragment>\r\n\r\n\t\t\t// Label (or content).\r\n\t\t\titemChildren = React.Children.toArray(children)\r\n\r\n\t\t\t// Icon.\r\n\t\t\tif (icon)\r\n\t\t\t{\r\n\t\t\t\titemChildren.unshift((\r\n\t\t\t\t\t<span key='icon' className=\"rrui__list__item-icon\">\r\n\t\t\t\t\t\t{ React.createElement(icon, { value, label }) }\r\n\t\t\t\t\t</span>\r\n\t\t\t\t))\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Don't overwrite `className` already defined on the `children`.\r\n\t\t\tproperties.className = classNames(properties.className, children.props && children.props.className)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<li\r\n\t\t\t\trole={this.shouldCreateButton() || children.type === DividerType ? 'presentation' : role}\r\n\t\t\t\taria-selected={this.shouldCreateButton() ? undefined : (role && role !== 'presentation' ? (ariaSelectedOnFocusedItem ? focused : isSelected) : undefined)}\r\n\t\t\t\taria-label={this.shouldCreateButton() ? undefined : label}\r\n\t\t\t\tclassName=\"rrui__list__list-item\">\r\n\t\t\t\t{ ItemComponent && React.createElement(ItemComponent, properties, itemChildren) }\r\n\t\t\t\t{ !ItemComponent && React.cloneElement(children, properties) }\r\n\t\t\t</li>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nList.Item = Item\r\n\r\n// Workaround for `react-hot-loader`.\r\n// https://github.com/gaearon/react-hot-loader#checking-element-types\r\nconst ItemType = <Item/>.type\r\n\r\nfunction haveItemsChanged(props, prevProps)\r\n{\r\n\tconst items     = React.Children.toArray(props.children)\r\n\tconst prevItems = React.Children.toArray(prevProps.children)\r\n\r\n\tif (items.length !== prevItems.length) {\r\n\t\treturn true\r\n\t}\r\n\r\n\tlet i = 0\r\n\twhile (i < items.length)\r\n\t{\r\n\t\tif (items[i].props.value !== prevItems[i].props.value) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\ti++\r\n\t}\r\n\r\n\treturn false\r\n}\r\n\r\nexport function findItemIndexByValue(value, children)\r\n{\r\n\tconst items = React.Children.toArray(children)\r\n\r\n\tlet i = 0\r\n\tfor (const item of items)\r\n\t{\r\n\t\tif (item.props.value === value) {\r\n\t\t\treturn i\r\n\t\t}\r\n\t\ti++\r\n\t}\r\n\r\n\t// The item could be missing due to being trimmed by `maxOptions` in `Autocomplete`.\r\n\t// console.error(`Item with value ${value} not found in a <List/>. Available values: ${items.length > 0 ? items.map(_ => _.props.value).join(', ') : '(none)'}.`)\r\n}"]}