{"version":3,"sources":["../source/PageAndMenu.js"],"names":["Context","PageAndMenu","toggleMenu","menu","toggle","setState","menuIsExpanded","isShown","focus","menuButton","element","registerMenu","Error","undefined","registerMenuButton","hideMenu","event","contains","target","state","props"],"mappings":";;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEO,IAAMA,4BAAU,mCAAhB;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;;IAEqBC,W;;;AAEpB;AACA;AACA;AACA;AACA;AACA;;AAEA,wBACA;AAAA;;AAGC;AACA;AAJD;;AAAA,QA6BAC,UA7BA,GA6Ba,YACb;AACC,SAAKC,IAAL,CAAUC,MAAV,CAAiB,YAAM;AACtB,UAAKC,QAAL,CAAc;AACbC,qBAAiB,MAAKH,IAAL,CAAUI,OAAV;AADJ,KAAd;AAGA;AACA;AACA,QAAI,MAAKJ,IAAL,CAAUI,OAAV,EAAJ,EAAyB;AACxB,SAAMJ,OAAO,MAAKA,IAAL,CAAUA,IAAV,EAAb;AACAA,aAAQA,KAAKK,KAAb,IAAsBL,KAAKK,KAAL,EAAtB;AACA,KAHD,MAGO;AACN,WAAKC,UAAL,CAAgBC,OAAhB,GAA0BF,KAA1B;AACA;AACD,IAZD;AAaA,GA5CD;;AAAA,QA8CAG,YA9CA,GA8Ce,UAACR,IAAD,EACf;AACC,OAAI,MAAKA,IAAT,EAAe;AACd,UAAM,IAAIS,KAAJ,CAAU,yEAAV,CAAN;AACA;;AAED,SAAKT,IAAL,GAAYA,IAAZ;;AAEA;AACA,UAAO;AAAA,WAAM,MAAKA,IAAL,GAAYU,SAAlB;AAAA,IAAP;AACA,GAxDD;;AAAA,QA0DAC,kBA1DA,GA0DqB,UAACL,UAAD,EACrB;AACC,OAAI,MAAKA,UAAT,EAAqB;AACpB,UAAM,IAAIG,KAAJ,CAAU,gFAAV,CAAN;AACA;;AAED,SAAKH,UAAL,GAAkBA,UAAlB;;AAEA;AACA,UAAO;AAAA,WAAM,MAAKA,UAAL,GAAkBI,SAAxB;AAAA,IAAP;AACA,GApED;;AAAA,QAsEAE,QAtEA,GAsEW,UAACC,KAAD,EAAW;AACrB,OAAI,CAAC,MAAKb,IAAN,IAAc,CAAC,MAAKM,UAAxB,EAAoC;AACnC;AACA;AACD;AACA,OAAI,MAAKN,IAAL,CAAUO,OAAV,GAAoBO,QAApB,CAA6BD,MAAME,MAAnC,KACA,MAAKT,UAAL,CAAgBC,OAAhB,GAA0BO,QAA1B,CAAmCD,MAAME,MAAzC,CADJ,EACsD;AACrD;AACA;AACD,OAAI,MAAKf,IAAL,CAAUI,OAAV,EAAJ,EAAyB;AACxB,UAAKL,UAAL;AACA;AACD,GAlFD;;AAKC,QAAKiB,KAAL,GACA;AACC;AACA;AACA;AACAb,mBAAqBO,SAJtB,EAIiC;AAChCX,eAAqB,MAAKA,UAL3B;AAMCS,iBAAqB,MAAKA,YAN3B;AAOCG,uBAAqB,MAAKA;AAP3B,GADA;AALD;AAeC;;;;2BAGD;AACC,UACC;AAAC,WAAD,CAAS,QAAT;AAAA,MAAkB,OAAQ,KAAKK,KAA/B;AACC;AACC,mBAAe,KAAKJ,QADrB;AAEC,kBAAc,KAAKA;AAFpB,OAGM,KAAKK,KAHX;AADD,IADD;AAQA;;;;;;kBArCmBnB,W","file":"PageAndMenu.js","sourcesContent":["import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport createContext from 'create-react-context'\r\n\r\nexport const Context = createContext()\r\n\r\n// export const contextPropTypes =\r\n// {\r\n// \tmenuIsExpanded     : PropTypes.bool.isRequired,\r\n// \ttoggleMenu         : PropTypes.func.isRequired,\r\n// \tregisterMenu       : PropTypes.func.isRequired,\r\n// \tregisterMenuButton : PropTypes.func.isRequired\r\n// }\r\n\r\nexport default class PageAndMenu extends Component\r\n{\r\n\t// state =\r\n\t// {\r\n\t// \tshow_menu  : false,\r\n\t// \tmenu_width : 0,\r\n\t// \tpage_moved_aside : false\r\n\t// }\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tsuper()\r\n\r\n\t\t// `state` is placed here to so that it's initialized\r\n\t\t// after all instance methods because it references them.\r\n\t\tthis.state =\r\n\t\t{\r\n\t\t\t// Using `undefined` for `menuIsExpanded` instead of `false`\r\n\t\t\t// because menu icon uses it to determine whether\r\n\t\t\t// the button has been activated yet.\r\n\t\t\tmenuIsExpanded     : undefined, // false,\r\n\t\t\ttoggleMenu         : this.toggleMenu,\r\n\t\t\tregisterMenu       : this.registerMenu,\r\n\t\t\tregisterMenuButton : this.registerMenuButton\r\n\t\t}\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\treturn (\r\n\t\t\t<Context.Provider value={ this.state }>\r\n\t\t\t\t<div\r\n\t\t\t\t\tonTouchStart={ this.hideMenu }\r\n\t\t\t\t\tonMouseDown={ this.hideMenu }\r\n\t\t\t\t\t{ ...this.props }/>\r\n\t\t\t</Context.Provider>\r\n\t\t)\r\n\t}\r\n\r\n\ttoggleMenu = () =>\r\n\t{\r\n\t\tthis.menu.toggle(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tmenuIsExpanded : this.menu.isShown()\r\n\t\t\t})\r\n\t\t\t// Focus the menu when it's expanded.\r\n\t\t\t// Focus the menu button when menu is collapsed.\r\n\t\t\tif (this.menu.isShown()) {\r\n\t\t\t\tconst menu = this.menu.menu()\r\n\t\t\t\tmenu && menu.focus && menu.focus()\r\n\t\t\t} else {\r\n\t\t\t\tthis.menuButton.element().focus()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tregisterMenu = (menu) =>\r\n\t{\r\n\t\tif (this.menu) {\r\n\t\t\tthrow new Error('[react-responsive-ui] There already is a menu registered for this page.')\r\n\t\t}\r\n\r\n\t\tthis.menu = menu\r\n\r\n\t\t// Return `.unregister()`.\r\n\t\treturn () => this.menu = undefined\r\n\t}\r\n\r\n\tregisterMenuButton = (menuButton) =>\r\n\t{\r\n\t\tif (this.menuButton) {\r\n\t\t\tthrow new Error('[react-responsive-ui] There already is a menu button registered for this page.')\r\n\t\t}\r\n\r\n\t\tthis.menuButton = menuButton\r\n\r\n\t\t// Return `.unregister()`.\r\n\t\treturn () => this.menuButton = undefined\r\n\t}\r\n\r\n\thideMenu = (event) => {\r\n\t\tif (!this.menu || !this.menuButton) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// Hide the menu only if clicked outside\r\n\t\tif (this.menu.element().contains(event.target)\r\n\t\t\t|| this.menuButton.element().contains(event.target)) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (this.menu.isShown()) {\r\n\t\t\tthis.toggleMenu()\r\n\t\t}\r\n\t}\r\n}"]}