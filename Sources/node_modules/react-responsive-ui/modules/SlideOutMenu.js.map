{"version":3,"sources":["../source/SlideOutMenu.js"],"names":["Context","PureComponent","Component","ContextAwareSlideoutMenu","slideOutMenu","show","current","hide","props","context","registerMenu","toggleMenu","SlideoutMenu","state","container","toggle","callback","onCollapse","onExpand","setState","onKeyDown","event","ctrlKey","altKey","shiftKey","metaKey","keyCode","preventDefault","menuRef","unregister","isShown","element","menu","anchor","fullscreen","style","className","children","propTypes","oneOf","isRequired","bool","object","func","string","defaultProps"],"mappings":"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","file":"SlideOutMenu.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\nimport createRef from 'react-create-ref'\r\nimport createContext from 'create-react-context'\r\n\r\nimport { Context as PageAndMenuContext } from './PageAndMenu'\r\n\r\nexport const Context = createContext()\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\nexport default class ContextAwareSlideoutMenu extends PureComponent {\r\n\tslideOutMenu = createRef()\r\n\tshow = () => this.slideOutMenu.current.show()\r\n\thide = () => this.slideOutMenu.current.hide()\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<PageAndMenuContext.Consumer>\r\n\t\t\t\t{context => (\r\n\t\t\t\t\t<SlideoutMenu\r\n\t\t\t\t\t\tref={this.slideOutMenu}\r\n\t\t\t\t\t\t{...this.props}\r\n\t\t\t\t\t\tregisterMenu={context.registerMenu}\r\n\t\t\t\t\t\ttoggleMenu={context.toggleMenu}/>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</PageAndMenuContext.Consumer>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// const ContextAwareSlideoutMenu = (props) => (\r\n// \t<PageAndMenuContext.Consumer>\r\n// \t\t{context => (\r\n// \t\t\t<SlideoutMenu\r\n// \t\t\t\t{...props}\r\n// \t\t\t\tregisterMenu={context.registerMenu}\r\n// \t\t\t\ttoggleMenu={context.toggleMenu}/>\r\n// \t\t\t)\r\n// \t\t}\r\n// \t</PageAndMenuContext.Consumer>\r\n// )\r\n\r\n// export default ContextAwareSlideoutMenu\r\n\r\n// Swipeable feature example source code:\r\n// https://github.com/mui-org/material-ui/blob/v1-beta/packages/material-ui/src/SwipeableDrawer/SwipeableDrawer.js\r\n\r\n// A slideout menu.\r\nclass SlideoutMenu extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\tanchor : PropTypes.oneOf([\r\n\t\t\t'left',\r\n\t\t\t'right',\r\n\t\t\t'top',\r\n\t\t\t'bottom'\r\n\t\t]).isRequired,\r\n\r\n\t\t// isOpen : PropTypes.bool.isRequired,\r\n\r\n\t\tfullscreen : PropTypes.bool.isRequired,\r\n\r\n\t\t// A result of `React.createRef()`.\r\n\t\t// Will be focused when the menu is opened.\r\n\t\tmenuRef : PropTypes.object,\r\n\r\n\t\tonCollapse : PropTypes.func,\r\n\t\tonExpand : PropTypes.func,\r\n\r\n\t\ttoggleMenu   : PropTypes.func.isRequired,\r\n\t\tregisterMenu : PropTypes.func.isRequired,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle : PropTypes.object,\r\n\r\n\t\t// CSS class\r\n\t\tclassName : PropTypes.string\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\t// isOpen : false,\r\n\t\tanchor : 'left',\r\n\t\tfullscreen : false\r\n\t}\r\n\r\n\tstate = {\r\n\t\t// show: this.props.isOpen\r\n\t\tshow: false\r\n\t}\r\n\r\n\tcontainer = createRef()\r\n\r\n\tcomponentDidMount()\r\n\t{\r\n\t\tconst { registerMenu, menuRef } = this.props\r\n\t\tconst { show } = this.state\r\n\r\n\t\tthis.unregister = registerMenu\r\n\t\t({\r\n\t\t\thide    : () => this.setState({ show: false }),\r\n\t\t\ttoggle  : this.toggle,\r\n\t\t\tisShown : () => this.state.show,\r\n\t\t\telement : () => this.container.current,\r\n\t\t\tmenu    : () => menuRef ? menuRef.current : this.container.current\r\n\t\t})\r\n\r\n\t\t// // Hide on `Back`/`Forward` navigation.\r\n\t\t// window.addEventListener('popstate', this.hide)\r\n\t}\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tthis.unregister()\r\n\r\n\t\t// window.removeEventListener('popstate', this.hide)\r\n\t}\r\n\r\n\t// componentDidUpdate(prevProps)\r\n\t// {\r\n\t// \tconst { isOpen } = this.props\r\n\r\n\t// \tif (prevProps.isOpen && !isOpen) {\r\n\t// \t\tthis.hide()\r\n\t// \t} else if (!prevProps.isOpen && isOpen) {\r\n\t// \t\tthis.show()\r\n\t// \t}\r\n\t// }\r\n\r\n\ttoggle = (callback) => {\r\n\t\tconst { onCollapse, onExpand } = this.props\r\n\t\tthis.setState((state) => {\r\n\t\t\tif (state.show) {\r\n\t\t\t\tonCollapse && onCollapse()\r\n\t\t\t} else {\r\n\t\t\t\tonExpand && onExpand()\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tshow: !state.show\r\n\t\t\t}\r\n\t\t}, callback)\r\n\t}\r\n\r\n\thide = () =>\r\n\t{\r\n\t\tconst { toggleMenu } = this.props\r\n\t\tconst { show } = this.state\r\n\r\n\t\tif (show) {\r\n\t\t\ttoggleMenu()\r\n\t\t}\r\n\t}\r\n\r\n\tonKeyDown = (event) => {\r\n\t\tconst { toggleMenu } = this.props\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tswitch (event.keyCode) {\r\n\t\t\t// Collapse on \"Escape\".\r\n\t\t\tcase 27:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\treturn toggleMenu()\r\n\t\t}\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst {\r\n\t\t\tanchor,\r\n\t\t\tfullscreen,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\t\t\tchildren\r\n\t\t} = this.props\r\n\r\n\t\tconst { show } = this.state\r\n\r\n\t\t// ARIA menu notes:\r\n\t\t// https://www.w3.org/TR/wai-aria-practices/examples/menu-button/menu-button-links.html\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={ this.container }\r\n\t\t\t\taria-hidden={ !show }\r\n\t\t\t\ttabIndex={ -1 }\r\n\t\t\t\tonKeyDown={ this.onKeyDown }\r\n\t\t\t\tstyle={ style }\r\n\t\t\t\tclassName={ classNames(\r\n\t\t\t\t\tclassName,\r\n\t\t\t\t\t/* Developers can define custom `:focus` style for the slideout menu. */\r\n\t\t\t\t\t/* (or better add `menuRef` property pointing to a component having `.focus()` method). */\r\n\t\t\t\t\t'rrui__outline',\r\n\t\t\t\t\t'rrui__slideout-menu',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'rrui__slideout-menu--left'       : anchor === 'left',\r\n\t\t\t\t\t\t'rrui__slideout-menu--right'      : anchor === 'right',\r\n\t\t\t\t\t\t'rrui__slideout-menu--top'        : anchor === 'top',\r\n\t\t\t\t\t\t'rrui__slideout-menu--bottom'     : anchor === 'bottom',\r\n\t\t\t\t\t\t'rrui__slideout-menu--fullscreen' : fullscreen,\r\n\t\t\t\t\t\t'rrui__slideout-menu--expanded'   : show\r\n\t\t\t\t\t}\r\n\t\t\t\t) }>\r\n\t\t\t\t{ children }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}"]}